<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=0">
    <title>网络设置</title>
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
        }
        .mdc-card {
            width: 100%;
            max-width: 420px;
            margin: 0 auto;
            padding: 32px 24px 24px 24px;
            border-radius: 16px;
            box-shadow: 0 6px 24px rgba(0,0,0,0.13);
            background: rgba(255,255,255,0.09);
            backdrop-filter: blur(4px);
        }
        .mdc-typography--headline5 {
            color: #fff;
            margin-bottom: 10px;
        }
        .mdc-typography--subtitle2, label {
            color: #d5e3f7;
        }
        .mdc-button {
            margin-top: 24px;
            width: 100%;
        }
        form > .mdc-text-field {
            width: 100%;
            margin-bottom: 18px;
        }
        .mdc-text-field--filled .mdc-floating-label {
            color: #fff;
        }
        .mdc-text-field--filled {
            background: rgba(255,255,255,0.13);
        }
        .fade-in {
            animation: fadeIn 0.8s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(24px);}
            to { opacity: 1; transform: translateY(0);}
        }
        select.mdc-custom-select {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 18px;
            border-radius: 8px;
            border: none;
            outline: none;
            background: rgba(255,255,255,0.13);
            color: #fff;
            font-size: 16px;
            appearance: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }
        select.mdc-custom-select:focus {
            box-shadow: 0 0 0 2px #2575fc;
        }
        option {
            color: #222;
        }
    </style>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="mdc-card fade-in">
        <h2 class="mdc-typography mdc-typography--headline5">Wi-Fi 设置</h2>
        <div class="mdc-typography mdc-typography--subtitle2" style="margin-bottom:18px;">
            请选择你的网络名称，输入密码和Blinker密钥
        </div>
        <form action="/setap" method="post" autocomplete="off">
            <label style="margin-bottom:8px;">网络名称: </label>
            <select class="mdc-custom-select" name="ssid">
                )" + ssid_list + R"(
            </select>
            <label class="mdc-text-field mdc-text-field--filled mdc-text-field--with-trailing-icon" style="margin-bottom:0;">
                <span class="mdc-text-field__ripple"></span>
                <input class="mdc-text-field__input" id="wifi-password" type="password" name="pass" required minlength="8" autocomplete="off" aria-label="网络密码">
                <span class="mdc-floating-label" id="wifi-password-label">网络密码</span>
                <span class="mdc-line-ripple"></span>
                <i class="material-icons mdc-text-field__icon" tabindex="0" role="button" id="toggle-pass">visibility_off</i>
            </label>
            <label class="mdc-text-field mdc-text-field--filled" style="margin-bottom:0;">
                <span class="mdc-text-field__ripple"></span>
                <input class="mdc-text-field__input" id="blinker-auth" type="text" name="auth" required autocomplete="off" aria-label="点灯密钥">
                <span class="mdc-floating-label" id="blinker-auth-label">点灯密钥</span>
                <span class="mdc-line-ripple"></span>
            </label>
            <button class="mdc-button mdc-button--raised" type="submit">
                <span class="mdc-button__label">保存设置</span>
            </button>
        </form>
    </div>
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script>
        mdc.autoInit();
        const passInput = document.querySelector('input[name="pass"]');
        const toggle = document.getElementById('toggle-pass');
        toggle.addEventListener('click', () => {
            if (passInput.type === "password") {
                passInput.type = "text";
                toggle.textContent = "visibility";
            } else {
                passInput.type = "password";
                toggle.textContent = "visibility_off";
            }
        });

        function activateMaterialField(inputSelector, labelSelector) {
            const input = document.getElementById(inputSelector);
            const label = document.getElementById(labelSelector);
            function check() {
                if (input.value) {
                    label.classList.add('mdc-floating-label--float-above');
                } else {
                    label.classList.remove('mdc-floating-label--float-above');
                }
            }
            input.addEventListener('focus', check);
            input.addEventListener('input', check);
            input.addEventListener('blur', check);
            check();
        }

        activateMaterialField('wifi-password', 'wifi-password-label');
        activateMaterialField('blinker-auth', 'blinker-auth-label');
    </script>
</body>
</html>
